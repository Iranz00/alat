<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>POLTAR 4D/3D/2D - RAN</title>
<style>
* { 
    margin:0; 
    padding:0; 
    box-sizing:border-box; 
}
body { 
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
    min-height: 100vh;
    padding: 20px;
    display: flex;
    align-items: flex-start;
    justify-content: center;
    transition: all 0.3s ease;
}
.container { 
    max-width:800px; 
    width:100%;
    margin:0 auto; 
    background:white; 
    border-radius:20px; 
    padding:30px; 
    box-shadow:0 20px 40px rgba(0,0,0,0.15);
    transition: all 0.3s ease;
}
.header { 
    text-align:center; 
    margin-bottom:25px; 
}
h1 { 
    color:#2d3748; 
    margin-bottom:8px; 
    font-size:2.2rem;
    font-weight:700;
    transition: all 0.3s ease;
}
.subtitle { 
    text-align:center; 
    color:#718096; 
    font-size:15px; 
    margin-bottom:25px;
    line-height:1.5;
    transition: all 0.3s ease;
}

/* Theme Toggle */
.theme-toggle {
    text-align: center;
    margin-bottom: 20px;
}
.theme-toggle button {
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
    border: none;
    padding: 12px 24px;
    border-radius: 25px;
    cursor: pointer;
    font-size: 14px;
    font-weight: 600;
    display: inline-flex;
    align-items: center;
    gap: 8px;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}
.theme-toggle button:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0,0,0,0.15);
}

/* Input Section */
.input-section {
    margin-bottom:20px;
}
.input-group {
    display: grid;
    gap: 20px;
    margin-bottom: 20px;
}
.input-box {
    padding: 20px;
    border: 2px solid #e2e8f0;
    border-radius: 12px;
    background: #f8fafc;
    transition: all 0.3s ease;
}
.input-box h3 {
    color: #2d3748;
    margin-bottom: 15px;
    font-size: 1.1rem;
    transition: all 0.3s ease;
}
.input-kombinasi {
    width:100%; 
    padding:12px; 
    border:2px solid #e2e8f0; 
    border-radius:8px; 
    font-size:16px; 
    font-family: 'Courier New', monospace;
    transition: all 0.3s ease;
}
.input-kombinasi:focus { 
    border-color:#667eea; 
    outline:none;
}

/* Digit Selection */
.digit-selection {
    background:#f8f9fa;
    padding:15px;
    border-radius:10px;
    margin-bottom:15px;
    border:2px solid #e9ecef;
    transition: all 0.3s ease;
}
.digit-selection h3 {
    margin-bottom:10px;
    color:#333;
    font-size:14px;
    text-align:center;
    transition: all 0.3s ease;
}
.checkbox-group {
    display:flex;
    justify-content:center;
    gap:15px;
    flex-wrap:wrap;
}
.checkbox-item {
    display:flex;
    align-items:center;
    gap:5px;
}
.checkbox-item input[type="checkbox"] {
    width:16px;
    height:16px;
}
.checkbox-item label {
    font-size:14px;
    color:#333;
    cursor:pointer;
    transition: all 0.3s ease;
}

/* Button Group */
.button-group { 
    display:flex; 
    gap:12px; 
    margin-bottom:20px;
}
button { 
    flex: 1; 
    padding: 16px 12px;
    border:none; 
    border-radius:12px; 
    font-size:15px; 
    font-weight:600; 
    cursor:pointer; 
    transition:all 0.3s;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
}
.btn-primary { 
    background:linear-gradient(135deg, #4CAF50, #45a049);
    color:white;
}
.btn-secondary { 
    background:linear-gradient(135deg, #2196F3, #1976D2);
    color:white;
}
.btn-danger {
    background:linear-gradient(135deg, #f44336, #f44336);
    color:white;
}
button:hover { 
    transform:translateY(-3px);
    box-shadow: 0 6px 20px rgba(0,0,0,0.15);
}

/* Info & Stats */
.info { 
    background:#e3f2fd; 
    padding:18px; 
    border-radius:12px; 
    margin-bottom:20px; 
    text-align:center;
    font-weight:500;
    border-left:4px solid #2196F3;
    transition: all 0.3s ease;
}
.info.success {
    background:#e8f5e8;
    border-left-color:#4CAF50;
    color:#2e7d32;
}
.info.error {
    background:#ffebee;
    border-left-color:#f44336;
    color:#c62828;
}
.stats {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
    padding: 15px;
    background: #f8fafc;
    border-radius: 12px;
    border-left: 4px solid #667eea;
    transition: all 0.3s ease;
}

/* Output */
.markdown-output { 
    background:#1a202c; 
    color:#e2e8f0; 
    padding:25px; 
    border-radius:12px; 
    margin-top:10px; 
    font-family:'Courier New', monospace; 
    white-space:pre-wrap; 
    max-height:500px;
    overflow-y:auto; 
    line-height:1.5;
    font-size:14px;
}

/* Dark Theme Styles */
body.dark-theme {
    background: linear-gradient(135deg, #2d3748 0%, #1a202c 100%);
}
body.dark-theme .container {
    background: #2d3748;
    color: #e2e8f0;
    box-shadow: 0 20px 40px rgba(0,0,0,0.3);
}
body.dark-theme h1 {
    color: #e2e8f0;
}
body.dark-theme .subtitle {
    color: #a0aec0;
}
body.dark-theme .input-box {
    background: #4a5568;
    border-color: #718096;
}
body.dark-theme .input-box h3 {
    color: #e2e8f0;
}
body.dark-theme .input-kombinasi {
    background: #4a5568;
    border-color: #718096;
    color: #e2e8f0;
}
body.dark-theme .input-kombinasi:focus {
    border-color: #667eea;
    background: #4a5568;
}
body.dark-theme .info {
    background: #4a5568;
    border-left-color: #667eea;
    color: #e2e8f0;
}
body.dark-theme .info.success {
    background: #2d5c2d;
    border-left-color: #4CAF50;
}
body.dark-theme .info.error {
    background: #5c2d2d;
    border-left-color: #f44336;
}
body.dark-theme .stats {
    background: #4a5568;
    color: #e2e8f0;
}
body.dark-theme .digit-selection {
    background: #4a5568;
    border-color: #718096;
}
body.dark-theme .digit-selection h3 {
    color: #e2e8f0;
}
body.dark-theme .checkbox-item label {
    color: #e2e8f0;
}
body.dark-theme .theme-toggle button {
    background: linear-gradient(135deg, #4a5568, #718096);
}

@media (max-width: 768px) {
    .button-group {
        flex-wrap: wrap;
    }
    button {
        min-width: calc(50% - 6px);
    }
    .checkbox-group {
        gap: 10px;
    }
}
</style>
</head>
<body>
<div class="container">
    <div class="header">
        <h1>üî¢ GENERATOR KOMBINASI 4D/3D/2D</h1>
        <div class="subtitle">Generate semua kemungkinan kombinasi dari kelompok angka yang dimasukkan</div>
    </div>
    
    <div class="theme-toggle">
        <button id="themeButton" onclick="toggleTheme()">
            <span>üåô</span>
            <span>Mode Gelap</span>
        </button>
    </div>
    
    <div class="input-section">
        <div class="input-group">
            <div class="input-box">
                <input type="text" id="inputKelompok" class="input-kombinasi" 
                       placeholder="Masukkan angka dipisahkan koma (contoh: 134,568,256,189)"
                       onkeypress="if(event.key === 'Enter') generateKombinasi()">
            </div>
        </div>
        
        <div class="digit-selection">
            <h3>üìä PILIH JENIS KOMBINASI:</h3>
            <div class="checkbox-group" id="kombinasiCheckboxes">
                <div class="checkbox-item">
                    <input type="checkbox" id="kombinasi4D" value="4D" checked>
                    <label for="kombinasi4D">4D</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="kombinasi3D" value="3D" checked>
                    <label for="kombinasi3D">3D</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="kombinasi2D" value="2D" checked>
                    <label for="kombinasi2D">2D</label>
                </div>
            </div>
        </div>
        
        <div class="button-group">
            <button class="btn-primary" onclick="generateKombinasi()">
                <span>üé≤</span>
                <span>GENERATE KOMBINASI</span>
            </button>
            <button class="btn-secondary" onclick="copyKombinasi()">
                <span>üìã</span>
                <span>SALIN HASIL</span>
            </button>
            <button class="btn-danger" onclick="clearKombinasi()">
                <span>üóëÔ∏è</span>
                <span>RESET</span>
            </button>
        </div>
    </div>
    
    <div class="info" id="infoKombinasi">
        üí° <strong>Cara penggunaan:</strong><br>
        ‚Ä¢ Masukkan kelompok angka dipisahkan koma<br>
        ‚Ä¢ Pilih jenis kombinasi yang ingin digenerate<br>
        ‚Ä¢ Program akan otomatis generate 4D, 3D, dan 2D
    </div>

    <div class="output-section">
        <div class="stats">
            <div><strong>HASIL KOMBINASI:</strong></div>
            <div id="totalKombinasi">0 kombinasi</div>
        </div>
        <div class="markdown-output" id="outputKombinasi">// Hasil kombinasi akan muncul di sini...</div>
    </div>
</div>

<script>
// =============================================
// THEME TOGGLE
// =============================================
function toggleTheme() {
    const body = document.body;
    const themeButton = document.getElementById('themeButton');
    
    body.classList.toggle('dark-theme');
    
    if (body.classList.contains('dark-theme')) {
        themeButton.innerHTML = '<span>‚òÄÔ∏è</span><span>Mode Terang</span>';
        localStorage.setItem('theme', 'dark');
    } else {
        themeButton.innerHTML = '<span>üåô</span><span>Mode Gelap</span>';
        localStorage.setItem('theme', 'light');
    }
}

function loadTheme() {
    const savedTheme = localStorage.getItem('theme');
    const themeButton = document.getElementById('themeButton');
    
    if (savedTheme === 'dark') {
        document.body.classList.add('dark-theme');
        themeButton.innerHTML = '<span>‚òÄÔ∏è</span><span>Mode Terang</span>';
    }
}

// =============================================
// KOMBINASI FUNCTIONS
// =============================================
function generateKombinasi() {
    const input = document.getElementById('inputKelompok').value.trim();
    if (!input) {
        showInfo('Masukkan kelompok angka terlebih dahulu!', 'error');
        return;
    }
    
    // Get selected digit types
    const selectedTypes = [];
    if (document.getElementById('kombinasi4D').checked) selectedTypes.push('4D');
    if (document.getElementById('kombinasi3D').checked) selectedTypes.push('3D');
    if (document.getElementById('kombinasi2D').checked) selectedTypes.push('2D');
    
    if (selectedTypes.length === 0) {
        showInfo('Pilih minimal satu jenis kombinasi!', 'error');
        return;
    }
    
    const groups = input.split(',').map(g => g.trim()).filter(g => g);
    
    if (groups.length < 2) {
        showInfo('Masukkan minimal 2 kelompok angka!', 'error');
        return;
    }
    
    const results = {
        '4D': [],
        '3D': [], 
        '2D': []
    };
    
    // Generate berdasarkan jumlah kelompok dan pilihan user
    if (groups.length >= 4 && selectedTypes.includes('4D')) {
        results['4D'] = generateCartesian(groups.slice(0, 4));
    }
    if (groups.length >= 3 && selectedTypes.includes('3D')) {
        results['3D'] = groups.length >= 4 ? generateCartesian(groups.slice(1, 4)) : generateCartesian(groups);
    }
    if (groups.length >= 2 && selectedTypes.includes('2D')) {
        results['2D'] = groups.length >= 4 ? generateCartesian(groups.slice(2, 4)) : 
                      groups.length >= 3 ? generateCartesian(groups.slice(1)) : generateCartesian(groups);
    }
    
    let output = '';
    let total = 0;
    
    if (results['4D'].length > 0) {
        output += `4D (${results['4D'].length} kombinasi):\n`;
        output += results['4D'].join('*') + '*\n\n';
        total += results['4D'].length;
    }
    
    if (results['3D'].length > 0) {
        output += `3D (${results['3D'].length} kombinasi):\n`;
        output += results['3D'].join('*') + '*\n\n';
        total += results['3D'].length;
    }
    
    if (results['2D'].length > 0) {
        output += `2D (${results['2D'].length} kombinasi):\n`;
        output += results['2D'].join('*') + '*\n';
        total += results['2D'].length;
    }
    
    document.getElementById('outputKombinasi').textContent = output || 'Tidak ada kombinasi yang dihasilkan';
    document.getElementById('totalKombinasi').textContent = `${total.toLocaleString()} kombinasi`;
    showInfo(`Berhasil generate ${total.toLocaleString()} kombinasi!`, 'success');
}

function generateCartesian(arrays) {
    if (arrays.length === 0) return [];
    
    let results = arrays[0].split('');
    
    for (let i = 1; i < arrays.length; i++) {
        const temp = [];
        const currentArray = arrays[i].split('');
        
        for (let j = 0; j < results.length; j++) {
            for (let k = 0; k < currentArray.length; k++) {
                temp.push(results[j] + currentArray[k]);
            }
        }
        results = temp;
    }
    
    return results;
}

function copyKombinasi() {
    const output = document.getElementById('outputKombinasi').textContent;
    if (!output || output === '// Hasil kombinasi akan muncul di sini...' || output === 'Tidak ada kombinasi yang dihasilkan') {
        showInfo('Tidak ada hasil untuk disalin!', 'error');
        return;
    }
    
    copyToClipboard(output);
    showInfo('Hasil kombinasi berhasil disalin!', 'success');
}

function clearKombinasi() {
    document.getElementById('inputKelompok').value = '';
    document.getElementById('outputKombinasi').textContent = '// Hasil kombinasi akan muncul di sini...';
    document.getElementById('totalKombinasi').textContent = '0 kombinasi';
    document.querySelectorAll('#kombinasiCheckboxes input[type="checkbox"]').forEach(checkbox => {
        checkbox.checked = true;
    });
    showInfo('Semua data telah direset!', 'info');
}

function showInfo(message, type) {
    const infoDiv = document.getElementById('infoKombinasi');
    infoDiv.textContent = message;
    infoDiv.className = 'info';
    if (type === 'error') {
        infoDiv.classList.add('error');
    } else if (type === 'success') {
        infoDiv.classList.add('success');
    }
}

// =============================================
// UTILITY FUNCTIONS
// =============================================
function copyToClipboard(text) {
    const textArea = document.createElement('textarea');
    textArea.value = text;
    document.body.appendChild(textArea);
    textArea.select();
    document.execCommand('copy');
    document.body.removeChild(textArea);
}

// =============================================
// INITIALIZATION
// =============================================
document.addEventListener('DOMContentLoaded', function() {
    // Load saved theme
    loadTheme();
    
    // Support Enter key untuk generate
    document.getElementById('inputKelompok').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') generateKombinasi();
    });
});
</script>
</body>
</html>
