<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Angka Permutation Finder</title>
<style>
* { margin:0; padding:0; box-sizing:border-box; }
body { font-family: Arial,sans-serif; background: linear-gradient(135deg,#667eea,#764ba2); min-height:100vh; padding:20px; }
.container { max-width:1200px; margin:0 auto; background:white; border-radius:15px; padding:30px; box-shadow:0 10px 30px rgba(0,0,0,0.2); }
h1 { text-align:center; color:#333; margin-bottom:10px; }
.subtitle { text-align:center; color:#666; font-size:14px; margin-bottom:30px; }

.input-section { background:#f8f9fa; padding:25px; border-radius:10px; border:2px solid #e9ecef; margin-bottom:25px; }
.section-title { color:#333; margin-bottom:15px; font-size:16px; font-weight:bold; }
.data-input { margin-bottom:20px; }
.data-input textarea { width:100%; height:200px; padding:15px; border:2px solid #ddd; border-radius:8px; font-size:14px; resize:vertical; font-family:monospace; }
.search-input { margin-bottom:20px; }
.search-input input { width:100%; padding:15px; border:2px solid #ddd; border-radius:8px; font-size:16px; text-align:center; }
.search-input input:focus { border-color:#667eea; outline:none; }
.button-group { display:flex; gap:15px; margin-bottom:20px; }
button { flex:1; padding:15px; border:none; border-radius:8px; font-size:16px; font-weight:bold; cursor:pointer; transition:all 0.3s; }
.btn-search { background:#4CAF50;color:white; }
.btn-clear { background:#f44336;color:white; }
button:hover { opacity:0.9; transform:translateY(-2px); }
button:disabled { background:#cccccc; cursor:not-allowed; transform:none; }
.info { background:#e3f2fd; padding:15px; border-radius:8px; margin-bottom:20px; text-align:center; }

.results-section { background:#f8f9fa; padding:25px; border-radius:10px; border:2px solid #e9ecef; }
.result-category { margin-bottom:25px; }
.category-title { color:#333; margin-bottom:15px; font-size:16px; font-weight:bold; padding:10px; background:#e9ecef; border-radius:5px; }
.result-item { display:inline-block; margin:5px; padding:10px 15px; background:white; border-radius:5px; border:1px solid #e0e0e0; font-family:monospace; font-size:14px; }
.result-exact { background:#FFEBEE; border-color:#F44336; border-width:2px; color:#C62828; font-weight:bold; }
.result-permutation { background:#E3F2FD; border-color:#2196F3; border-width:2px; color:#1565C0; font-weight:bold; }
.result-none { background:#FFF3E0; border-color:#FF9800; color:#EF6C00; }

.stats { background:#e3f2fd; padding:15px; border-radius:8px; margin-top:20px; text-align:center; }
.permutation-list { background:#f5f5f5; padding:10px; border-radius:5px; margin-top:10px; font-size:12px; font-family:monospace; max-height:150px; overflow-y:auto; }

.loading { display:none; text-align:center; padding:20px; }
.spinner { border:5px solid #f3f3f3; border-top:5px solid #667eea; border-radius:50%; width:50px; height:50px; animation:spin 1s linear infinite; margin:0 auto 15px; }
@keyframes spin { 0% { transform:rotate(0deg); } 100% { transform:rotate(360deg); } }

.validation-error { border-color:#f44336 !important; background-color:#ffebee !important; }

/* Styling untuk tampilan data dengan highlight - Warna Lebih Cerah */
.data-display { background:white; padding:20px; border-radius:8px; border:2px solid #e9ecef; margin-bottom:20px; }
.data-line { margin-bottom:10px; line-height:1.8; }
.number-item { 
    display:inline-block; 
    padding:8px 12px; 
    margin:3px; 
    border-radius:6px; 
    border:2px solid; 
    font-family:monospace; 
    font-size:14px; 
    font-weight:bold;
    box-shadow:0 2px 4px rgba(0,0,0,0.1);
    transition:all 0.2s ease;
}
.number-normal { 
    background:#FAFAFA; 
    border-color:#E0E0E0; 
    color:#757575;
}
.number-exact { 
    background:#FF5252; 
    border-color:#D32F2F; 
    color:white;
    text-shadow:0 1px 2px rgba(0,0,0,0.2);
    box-shadow:0 3px 6px rgba(244,67,54,0.3);
}
.number-permutation { 
    background:#448AFF; 
    border-color:#1976D2; 
    color:white;
    text-shadow:0 1px 2px rgba(0,0,0,0.2);
    box-shadow:0 3px 6px rgba(33,150,243,0.3);
}

.number-item:hover {
    transform:translateY(-2px);
    box-shadow:0 4px 8px rgba(0,0,0,0.15);
}

.legend { 
    display:flex; 
    justify-content:center; 
    gap:20px; 
    margin-top:20px; 
    flex-wrap:wrap;
    background:#F5F5F5;
    padding:15px;
    border-radius:8px;
}
.legend-item { 
    display:flex; 
    align-items:center; 
    gap:8px; 
    font-size:13px;
    font-weight:500;
}
.legend-color { 
    width:20px; 
    height:20px; 
    border-radius:4px; 
    border:2px solid;
    box-shadow:0 2px 4px rgba(0,0,0,0.1);
}
.legend-exact { 
    background:#FF5252; 
    border-color:#D32F2F; 
}
.legend-permutation { 
    background:#448AFF; 
    border-color:#1976D2; 
}
.legend-normal { 
    background:#FAFAFA; 
    border-color:#E0E0E0; 
}

/* Tambahan efek visual untuk hasil */
.result-item {
    box-shadow:0 2px 4px rgba(0,0,0,0.1);
    transition:all 0.2s ease;
}

.result-item:hover {
    transform:translateY(-1px);
    box-shadow:0 4px 8px rgba(0,0,0,0.15);
}

.result-exact:hover {
    box-shadow:0 4px 8px rgba(244,67,54,0.3);
}

.result-permutation:hover {
    box-shadow:0 4px 8px rgba(33,150,243,0.3);
}
</style>
</head>
<body>
<div class="container">
    <h1>üî¢ ANGKA PERMUTATION FINDER</h1>
    <div class="subtitle">Cari angka dengan digit yang sama (urutan boleh berbeda)</div>
    
    <div class="input-section">
        <div class="section-title">üì• INPUT DATA ANGKA (4 digit)</div>
        
        <div class="data-input">
            <textarea id="inputData" placeholder="Masukkan data angka 4 digit (pisahkan dengan spasi/enter):&#10;2740 9348 7109 8934 0076 1267 4060&#10;4386 0267 6400 3699 6507 3203 4666&#10;0841 2496 2837 0583 0845 9265 7032&#10;1145 1645 1141 1445 1165 3145 1185">2740 9348 7109 8934 0076 1267 4060
4386 0267 6400 3699 6507 3203 4666
0841 2496 2837 0583 0845 9265 7032
1145 1645 1141 1445 1165 3145 1185
1142 5145 1105 1541 5115 5140 1485
4165 4155 1134 3115 8514 5841 1458</textarea>
        </div>
        
        <div class="search-input">
            <input type="text" id="searchNumber" placeholder="Masukkan angka 4 digit yang dicari (contoh: 1145)" maxlength="4" pattern="\d{4}" title="Masukkan 4 digit angka">
        </div>
        
        <div class="button-group">
            <button class="btn-search" id="searchButton" onclick="findNumberPermutations()">üîç CARI PERMUTASI</button>
            <button class="btn-clear" onclick="clearAll()">üóëÔ∏è CLEAR</button>
        </div>
        
        <div class="loading" id="loadingIndicator">
            <div class="spinner"></div>
            <p>Mencari permutasi...</p>
        </div>
        
        <div class="info" id="info">Masukkan data angka dan angka yang dicari, lalu klik CARI PERMUTASI</div>
    </div>

    <div class="results-section" id="resultsSection" style="display:none;">
        <div class="section-title">üìä HASIL PENCARIAN PERMUTASI</div>
        
        <div class="data-display" id="dataDisplay">
            <div class="section-title">üìã DATA INPUT DENGAN HIGHLIGHT</div>
            <div id="highlightedData"></div>
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color legend-exact"></div>
                    <span>Exact Match - Angka Sama Persis</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color legend-permutation"></div>
                    <span>Permutation Match - Digit Sama Urutan Beda</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color legend-normal"></div>
                    <span>Tidak Match</span>
                </div>
            </div>
        </div>
        
        <div id="resultsContainer"></div>
        <div class="stats" id="statsInfo"></div>
    </div>

    <div class="input-section">
        <div class="section-title">‚ÑπÔ∏è CARA KERJA PROGRAM</div>
        <div class="info">
            <strong>Algoritma Permutasi:</strong><br>
            1. <strong>Exact Match</strong> - Angka sama persis (abcd) <span style="color:#D32F2F; font-weight:bold;">[MERAH CERAH]</span><br>
            2. <strong>Same Digits</strong> - Digit sama, urutan berbeda (24 kemungkinan) <span style="color:#1976D2; font-weight:bold;">[BIRU CERAH]</span><br>
            3. <strong>Semua kombinasi</strong> dari 4 digit: abcd, abdc, acbd, acdb, adbc, adcb, bacd, ...
        </div>
    </div>
</div>

<script>
function findNumberPermutations() {
    const inputData = document.getElementById('inputData').value.trim();
    const searchNumber = document.getElementById('searchNumber').value.trim();
    const searchButton = document.getElementById('searchButton');
    
    // Reset validasi
    resetValidation();
    
    if (!inputData) {
        showInfo('Masukkan data angka terlebih dahulu!', 'error');
        document.getElementById('inputData').classList.add('validation-error');
        return;
    }
    
    if (!searchNumber || searchNumber.length !== 4 || !/^\d+$/.test(searchNumber)) {
        showInfo('Masukkan angka 4 digit yang valid!', 'error');
        document.getElementById('searchNumber').classList.add('validation-error');
        return;
    }
    
    try {
        showLoading(true);
        showInfo('Mencari permutasi...', 'info');
        
        // Parse data input
        const numbers = parseInputData(inputData);
        const searchDigits = searchNumber.split('');
        
        if (numbers.length === 0) {
            showInfo('Tidak ada angka valid yang ditemukan dalam data!', 'error');
            showLoading(false);
            return;
        }
        
        // Generate semua permutasi dari angka yang dicari
        const allPermutations = generatePermutations(searchDigits);
        console.log('Semua permutasi dari', searchNumber, ':', allPermutations);
        
        // Cari angka yang match
        const results = findMatchingNumbers(numbers, allPermutations, searchNumber);
        
        // Tampilkan hasil dengan highlight
        displayHighlightedData(inputData, results, searchNumber);
        
        // Tampilkan hasil ringkasan
        displayPermutationResults(results, searchNumber, numbers.length, allPermutations);
        showInfo(`Pencarian selesai!`, 'success');
        showLoading(false);
        
    } catch (error) {
        showInfo(`Error: ${error.message}`, 'error');
        console.error('Search error:', error);
        showLoading(false);
    }
}

function parseInputData(inputData) {
    // Hilangkan semua karakter non-digit dan split
    const cleanedData = inputData.replace(/[^\d\s]/g, '');
    const numberStrings = cleanedData.split(/\s+/).filter(str => str.length === 4);
    
    return numberStrings.map(str => str);
}

function generatePermutations(digits) {
    const results = [];
    const used = new Array(digits.length).fill(false);
    const current = [];
    
    function backtrack() {
        if (current.length === digits.length) {
            results.push(current.join(''));
            return;
        }
        
        for (let i = 0; i < digits.length; i++) {
            if (!used[i]) {
                // Skip duplicate permutations untuk digit yang sama
                if (i > 0 && digits[i] === digits[i-1] && !used[i-1]) {
                    continue;
                }
                
                used[i] = true;
                current.push(digits[i]);
                backtrack();
                current.pop();
                used[i] = false;
            }
        }
    }
    
    // Sort digits dulu untuk handle duplicates
    digits.sort();
    backtrack();
    
    return [...new Set(results)]; // Remove duplicates
}

function findMatchingNumbers(numbers, permutations, searchNumber) {
    const exactMatches = [];
    const permutationMatches = [];
    
    numbers.forEach(number => {
        if (number === searchNumber) {
            exactMatches.push(number);
        } else if (permutations.includes(number)) {
            permutationMatches.push(number);
        }
    });
    
    // Remove duplicates dan urutkan
    return {
        exactMatches: [...new Set(exactMatches)].sort(),
        permutationMatches: [...new Set(permutationMatches)].sort()
    };
}

function displayHighlightedData(inputData, results, searchNumber) {
    const container = document.getElementById('highlightedData');
    
    // Split data input menjadi baris-baris
    const lines = inputData.split('\n');
    let html = '';
    
    lines.forEach(line => {
        if (line.trim() === '') return;
        
        html += '<div class="data-line">';
        
        // Split setiap baris menjadi angka-angka
        const numbersInLine = line.trim().split(/\s+/);
        
        numbersInLine.forEach(number => {
            // Hanya proses angka 4 digit
            if (number.length === 4 && /^\d+$/.test(number)) {
                let cssClass = 'number-normal';
                
                if (results.exactMatches.includes(number)) {
                    cssClass = 'number-exact';
                } else if (results.permutationMatches.includes(number)) {
                    cssClass = 'number-permutation';
                }
                
                html += `<span class="number-item ${cssClass}">${number}</span>`;
            } else {
                // Untuk teks yang bukan angka 4 digit, tampilkan tanpa styling
                html += `<span>${number} </span>`;
            }
        });
        
        html += '</div>';
    });
    
    container.innerHTML = html;
    document.getElementById('dataDisplay').style.display = 'block';
}

function displayPermutationResults(results, searchNumber, totalNumbers, allPermutations) {
    const container = document.getElementById('resultsContainer');
    const statsInfo = document.getElementById('statsInfo');
    let html = '';
    
    // Tampilkan Exact Matches
    html += `<div class="result-category">`;
    html += `<div class="category-title">üéØ EXACT MATCH - Angka Sama Persis</div>`;
    if (results.exactMatches.length > 0) {
        results.exactMatches.forEach(number => {
            html += `<div class="result-item result-exact">${number}</div>`;
        });
    } else {
        html += `<div class="result-item result-none">Tidak ditemukan angka yang sama persis</div>`;
    }
    html += `</div>`;
    
    // Tampilkan Permutation Matches
    html += `<div class="result-category">`;
    html += `<div class="category-title">üîÑ PERMUTASI MATCH - Digit Sama Urutan Beda</div>`;
    if (results.permutationMatches.length > 0) {
        results.permutationMatches.forEach(number => {
            html += `<div class="result-item result-permutation">${number}</div>`;
        });
    } else {
        html += `<div class="result-item result-none">Tidak ditemukan permutasi</div>`;
    }
    html += `</div>`;
    
    // Tampilkan semua kemungkinan permutasi
    html += `<div class="result-category">`;
    html += `<div class="category-title">üìã SEMUA KEMUNGKINAN PERMUTASI</div>`;
    html += `<div class="permutation-list">`;
    html += `Dari angka <strong>${searchNumber}</strong> terdapat ${allPermutations.length} kemungkinan: `;
    html += allPermutations.join(', ');
    html += `</div>`;
    html += `</div>`;
    
    // Stats info
    const totalFound = results.exactMatches.length + results.permutationMatches.length;
    const percentage = ((totalFound / totalNumbers) * 100).toFixed(2);
    statsInfo.innerHTML = `
        <strong>üìä STATISTIK:</strong><br>
        Total data: ${totalNumbers} angka | Ditemukan: ${totalFound} match (${percentage}%)<br>
        Exact: ${results.exactMatches.length} | Permutasi: ${results.permutationMatches.length}<br>
        Total kemungkinan permutasi: ${allPermutations.length}
    `;
    
    container.innerHTML = html;
    document.getElementById('resultsSection').style.display = 'block';
}

function showInfo(message, type) {
    const infoDiv = document.getElementById('info');
    infoDiv.textContent = message;
    infoDiv.style.background = type === 'error' ? '#FFEBEE' : 
                             type === 'success' ? '#E8F5E9' : '#E3F2FD';
    infoDiv.style.color = type === 'error' ? '#C62828' :
                        type === 'success' ? '#2E7D32' : '#1565C0';
    infoDiv.style.border = type === 'error' ? '2px solid #FFCDD2' : 
                          type === 'success' ? '2px solid #C8E6C9' : '2px solid #BBDEFB';
}

function showLoading(show) {
    const loadingIndicator = document.getElementById('loadingIndicator');
    const searchButton = document.getElementById('searchButton');
    
    if (show) {
        loadingIndicator.style.display = 'block';
        searchButton.disabled = true;
        searchButton.textContent = '‚è≥ MENCARI...';
    } else {
        loadingIndicator.style.display = 'none';
        searchButton.disabled = false;
        searchButton.textContent = 'üîç CARI PERMUTASI';
    }
}

function resetValidation() {
    document.getElementById('inputData').classList.remove('validation-error');
    document.getElementById('searchNumber').classList.remove('validation-error');
}

function clearAll() {
    document.getElementById('inputData').value = '';
    document.getElementById('searchNumber').value = '';
    document.getElementById('resultsSection').style.display = 'none';
    document.getElementById('dataDisplay').style.display = 'none';
    resetValidation();
    showInfo('Masukkan data angka dan angka yang dicari, lalu klik CARI PERMUTASI', 'info');
}

// Event listeners untuk Enter key
document.getElementById('searchNumber').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
        findNumberPermutations();
    }
});

// Auto-format input hanya angka
document.getElementById('searchNumber').addEventListener('input', function(e) {
    this.value = this.value.replace(/[^\d]/g, '').slice(0, 4);
    resetValidation();
});

// Update info saat data berubah
document.getElementById('inputData').addEventListener('input', function() {
    const inputData = this.value.trim();
    const numbers = inputData ? parseInputData(inputData) : [];
    document.getElementById('info').textContent = 
        `${numbers.length} angka valid terdeteksi - Masukkan angka yang dicari`;
    resetValidation();
});

// Contoh data untuk testing
document.getElementById('inputData').value = `2740 9348 7109 8934 0076 1267 4060
4386 0267 6400 3699 6507 3203 4666
0841 2496 2837 0583 0845 9265 7032
1145 1645 1141 1445 1165 3145 1185
1142 5145 1105 1541 5115 5140 1485
4165 4155 1134 3115 8514 5841 1458
5411 4151 4511 1154 1514 1541 4115`;
</script>
</body>
</html>
