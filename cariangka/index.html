<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Angka Permutation Finder</title>
<style>
* { margin:0; padding:0; box-sizing:border-box; }
body { font-family: Arial,sans-serif; background: linear-gradient(135deg,#667eea,#764ba2); min-height:100vh; padding:20px; }
.container { max-width:1200px; margin:0 auto; background:white; border-radius:15px; padding:30px; box-shadow:0 10px 30px rgba(0,0,0,0.2); }
h1 { text-align:center; color:#333; margin-bottom:10px; }
.subtitle { text-align:center; color:#666; font-size:14px; margin-bottom:30px; }

.input-section { background:#f8f9fa; padding:25px; border-radius:10px; border:2px solid #e9ecef; margin-bottom:25px; }
.section-title { color:#333; margin-bottom:15px; font-size:16px; font-weight:bold; }
.data-input { margin-bottom:20px; }
.data-input textarea { width:100%; height:200px; padding:15px; border:2px solid #ddd; border-radius:8px; font-size:14px; resize:vertical; font-family:monospace; }
.search-input { margin-bottom:20px; }
.search-input input { width:100%; padding:15px; border:2px solid #ddd; border-radius:8px; font-size:16px; text-align:center; }
.search-input input:focus { border-color:#667eea; outline:none; }
.button-group { display:flex; gap:15px; margin-bottom:20px; }
button { flex:1; padding:15px; border:none; border-radius:8px; font-size:16px; font-weight:bold; cursor:pointer; transition:all 0.3s; }
.btn-search { background:#4CAF50;color:white; }
.btn-clear { background:#f44336;color:white; }
button:hover { opacity:0.9; transform:translateY(-2px); }
.info { background:#e3f2fd; padding:15px; border-radius:8px; margin-bottom:20px; text-align:center; }

.results-section { background:#f8f9fa; padding:25px; border-radius:10px; border:2px solid #e9ecef; }
.result-category { margin-bottom:25px; }
.category-title { color:#333; margin-bottom:15px; font-size:16px; font-weight:bold; padding:10px; background:#e9ecef; border-radius:5px; }
.result-item { display:inline-block; margin:5px; padding:10px 15px; background:white; border-radius:5px; border:1px solid #e0e0e0; font-family:monospace; font-size:14px; }
.result-exact { background:#e8f5e8; border-color:#4CAF50; border-width:2px; }
.result-permutation { background:#fff3e0; border-color:#FF9800; }
.result-none { background:#ffebee; border-color:#f44336; }

.stats { background:#e3f2fd; padding:15px; border-radius:8px; margin-top:20px; text-align:center; }
.permutation-list { background:#f5f5f5; padding:10px; border-radius:5px; margin-top:10px; font-size:12px; font-family:monospace; }
</style>
</head>
<body>
<div class="container">
    <h1>üî¢ ANGKA PERMUTATION FINDER</h1>
    <div class="subtitle">Cari angka dengan digit yang sama (urutan boleh berbeda)</div>
    
    <div class="input-section">
        <div class="section-title">üì• INPUT DATA ANGKA (4 digit)</div>
        
        <div class="data-input">
            <textarea id="inputData" placeholder="Masukkan data angka 4 digit (pisahkan dengan spasi/enter):&#10;2740 9348 7109 8934 0076 1267 4060&#10;4386 0267 6400 3699 6507 3203 4666&#10;0841 2496 2837 0583 0845 9265 7032&#10;1145 1645 1141 1445 1165 3145 1185">2740 9348 7109 8934 0076 1267 4060
4386 0267 6400 3699 6507 3203 4666
0841 2496 2837 0583 0845 9265 7032
1145 1645 1141 1445 1165 3145 1185
1142 5145 1105 1541 5115 5140 1485
4165 4155 1134 3115 8514 5841 1458</textarea>
        </div>
        
        <div class="search-input">
            <input type="text" id="searchNumber" placeholder="Masukkan angka 4 digit yang dicari (contoh: 1145)" maxlength="4" pattern="\d{4}" title="Masukkan 4 digit angka">
        </div>
        
        <div class="button-group">
            <button class="btn-search" onclick="findNumberPermutations()">üîç CARI PERMUTASI</button>
            <button class="btn-clear" onclick="clearAll()">üóëÔ∏è CLEAR</button>
        </div>
        
        <div class="info" id="info">Masukkan data angka dan angka yang dicari, lalu klik CARI PERMUTASI</div>
    </div>

    <div class="results-section" id="resultsSection" style="display:none;">
        <div class="section-title">üìä HASIL PENCARIAN PERMUTASI</div>
        <div id="resultsContainer"></div>
        <div class="stats" id="statsInfo"></div>
    </div>

    <div class="input-section">
        <div class="section-title">‚ÑπÔ∏è CARA KERJA PROGRAM</div>
        <div class="info">
            <strong>Algoritma Permutasi:</strong><br>
            1. <strong>Exact Match</strong> - Angka sama persis (abcd)<br>
            2. <strong>Same Digits</strong> - Digit sama, urutan berbeda (24 kemungkinan)<br>
            3. <strong>Semua kombinasi</strong> dari 4 digit: abcd, abdc, acbd, acdb, adbc, adcb, bacd, ...
        </div>
    </div>
</div>

<script>
function findNumberPermutations() {
    const inputData = document.getElementById('inputData').value.trim();
    const searchNumber = document.getElementById('searchNumber').value.trim();
    
    if (!inputData) {
        showInfo('Masukkan data angka terlebih dahulu!', 'error');
        return;
    }
    
    if (!searchNumber || searchNumber.length !== 4 || !/^\d+$/.test(searchNumber)) {
        showInfo('Masukkan angka 4 digit yang valid!', 'error');
        return;
    }
    
    try {
        showInfo('Mencari permutasi...', 'info');
        
        // Parse data input
        const numbers = parseInputData(inputData);
        const searchDigits = searchNumber.split('');
        
        if (numbers.length === 0) {
            showInfo('Tidak ada angka valid yang ditemukan dalam data!', 'error');
            return;
        }
        
        // Generate semua permutasi dari angka yang dicari
        const allPermutations = generatePermutations(searchDigits);
        console.log('Semua permutasi dari', searchNumber, ':', allPermutations);
        
        // Cari angka yang match
        const results = findMatchingNumbers(numbers, allPermutations, searchNumber);
        
        // Tampilkan hasil
        displayPermutationResults(results, searchNumber, numbers.length, allPermutations);
        showInfo(`Pencarian selesai!`, 'success');
        
    } catch (error) {
        showInfo(`Error: ${error.message}`, 'error');
        console.error('Search error:', error);
    }
}

function parseInputData(inputData) {
    // Hilangkan semua karakter non-digit dan split
    const cleanedData = inputData.replace(/[^\d\s]/g, '');
    const numberStrings = cleanedData.split(/\s+/).filter(str => str.length === 4);
    
    return numberStrings.map(str => str);
}

function generatePermutations(digits) {
    const results = [];
    const used = new Array(digits.length).fill(false);
    const current = [];
    
    function backtrack() {
        if (current.length === digits.length) {
            results.push(current.join(''));
            return;
        }
        
        for (let i = 0; i < digits.length; i++) {
            if (!used[i]) {
                // Skip duplicate permutations untuk digit yang sama
                if (i > 0 && digits[i] === digits[i-1] && !used[i-1]) {
                    continue;
                }
                
                used[i] = true;
                current.push(digits[i]);
                backtrack();
                current.pop();
                used[i] = false;
            }
        }
    }
    
    // Sort digits dulu untuk handle duplicates
    digits.sort();
    backtrack();
    
    return [...new Set(results)]; // Remove duplicates
}

function findMatchingNumbers(numbers, permutations, searchNumber) {
    const exactMatches = [];
    const permutationMatches = [];
    
    numbers.forEach(number => {
        if (number === searchNumber) {
            exactMatches.push(number);
        } else if (permutations.includes(number)) {
            permutationMatches.push(number);
        }
    });
    
    // Remove duplicates dan urutkan
    return {
        exactMatches: [...new Set(exactMatches)].sort(),
        permutationMatches: [...new Set(permutationMatches)].sort()
    };
}

function displayPermutationResults(results, searchNumber, totalNumbers, allPermutations) {
    const container = document.getElementById('resultsContainer');
    const statsInfo = document.getElementById('statsInfo');
    let html = '';
    
    // Tampilkan Exact Matches
    html += `<div class="result-category">`;
    html += `<div class="category-title">üéØ EXACT MATCH - Angka Sama Persis</div>`;
    if (results.exactMatches.length > 0) {
        results.exactMatches.forEach(number => {
            html += `<div class="result-item result-exact">${number}</div>`;
        });
    } else {
        html += `<div class="result-item result-none">Tidak ditemukan angka yang sama persis</div>`;
    }
    html += `</div>`;
    
    // Tampilkan Permutation Matches
    html += `<div class="result-category">`;
    html += `<div class="category-title">üîÑ PERMUTASI MATCH - Digit Sama Urutan Beda</div>`;
    if (results.permutationMatches.length > 0) {
        results.permutationMatches.forEach(number => {
            html += `<div class="result-item result-permutation">${number}</div>`;
        });
    } else {
        html += `<div class="result-item result-none">Tidak ditemukan permutasi</div>`;
    }
    html += `</div>`;
    
    // Tampilkan semua kemungkinan permutasi
    html += `<div class="result-category">`;
    html += `<div class="category-title">üìã SEMUA KEMUNGKINAN PERMUTASI</div>`;
    html += `<div class="permutation-list">`;
    html += `Dari angka <strong>${searchNumber}</strong> terdapat ${allPermutations.length} kemungkinan: `;
    html += allPermutations.join(', ');
    html += `</div>`;
    html += `</div>`;
    
    // Stats info
    const totalFound = results.exactMatches.length + results.permutationMatches.length;
    statsInfo.innerHTML = `
        <strong>üìä STATISTIK:</strong><br>
        Total data: ${totalNumbers} angka | Ditemukan: ${totalFound} match<br>
        Exact: ${results.exactMatches.length} | Permutasi: ${results.permutationMatches.length}<br>
        Total kemungkinan permutasi: ${allPermutations.length}
    `;
    
    container.innerHTML = html;
    document.getElementById('resultsSection').style.display = 'block';
}

function showInfo(message, type) {
    const infoDiv = document.getElementById('info');
    infoDiv.textContent = message;
    infoDiv.style.background = type === 'error' ? '#ffebee' : 
                             type === 'success' ? '#e8f5e8' : '#e3f2fd';
    infoDiv.style.color = type === 'error' ? '#c62828' :
                        type === 'success' ? '#2e7d32' : '#1565c0';
}

function clearAll() {
    document.getElementById('inputData').value = '';
    document.getElementById('searchNumber').value = '';
    document.getElementById('resultsSection').style.display = 'none';
    showInfo('Masukkan data angka dan angka yang dicari, lalu klik CARI PERMUTASI', 'info');
}

// Event listeners untuk Enter key
document.getElementById('searchNumber').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
        findNumberPermutations();
    }
});

// Auto-format input hanya angka
document.getElementById('searchNumber').addEventListener('input', function(e) {
    this.value = this.value.replace(/[^\d]/g, '').slice(0, 4);
});

// Update info saat data berubah
document.getElementById('inputData').addEventListener('input', function() {
    const inputData = this.value.trim();
    const numbers = inputData ? parseInputData(inputData) : [];
    document.getElementById('info').textContent = 
        `${numbers.length} angka valid terdeteksi - Masukkan angka yang dicari`;
});

// Contoh data untuk testing
document.getElementById('inputData').value = `2740 9348 7109 8934 0076 1267 4060
4386 0267 6400 3699 6507 3203 4666
0841 2496 2837 0583 0845 9265 7032
1145 1645 1141 1445 1165 3145 1185
1142 5145 1105 1541 5115 5140 1485
4165 4155 1134 3115 8514 5841 1458
5411 4151 4511 1154 1514 1541 4115`;
</script>
</body>
</html>
